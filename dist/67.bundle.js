(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{WRqF:function(t,e,n){var s=n("e0Nc");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,n("SZ7m").default)("929f16da",s,!0,{})},XuIn:function(t,e,n){"use strict";var s=n("WRqF");n.n(s).a},aaq0:function(t,e,n){"use strict";n.r(e);var s=n("L2JU"),i=n("IfgB"),a=n("Gbp+"),o=n("GwxU"),c=n.n(o),r=n("KLk5"),l=n.n(r),u=n("M1Dr"),h=n.n(u),d=n("TmN8"),m=n.n(d),p=n("48Ae"),f=n("AZxv");n("8olR");var v={components:{TokenSymbol:f.a},data:()=>({account:null,token:null,recipient:null,memo:"",toSend:null,fiat:0,sending:!1}),computed:{...Object(s.d)(["history"]),...Object(s.c)(["accounts","displayCurrency","contacts"]),sendableTokens(){return this.account.tokens().filter(t=>!t.unusable).sort((t,e)=>c.a.sorter(t,e))},canSend(){return!this.sending&&this.recipient&&this.recipient.length&&this.toSend&&this.toSend.amount>0}},mounted(){this.init()},methods:{init(){const t=this.$route.query.history?this.history.find(t=>t.id===this.$route.query.history):null,e=this.$route.query.account?(()=>{const t=this.accounts.find(t=>t.identifiable()===this.$route.query.account);return t?{account:t,token:this.$route.query.token?t.tokens().find(t=>t.uniqueWithChain()===this.$route.query.token):null}:null})():null,n=this.$route.query.recipient;if(t)this.account=t.from,this.recipient=t.to,this.memo=t.memo,this.token=this.account.tokens().find(e=>e.uniqueWithChain()===t.token.uniqueWithChain()),this.toSend=t.token.clone(),this.toSend.amount=t.amount,this.changedAmount();else if(e)this.account=e.account,e.token?this.setToken(e.token):this.setToken(this.sendableTokens[0]);else if(n){const t=this.contacts.find(t=>t.id===n);this.recipient=t.recipient,this.account=this.accounts.filter(e=>!t.blockchain||e.blockchain()===t.blockchain).filter(t=>t.tokens().length).sort((t,e)=>e.totalFiatBalance()-t.totalFiatBalance())[0],this.setToken(this.sendableTokens[0])}else this.account=this.accounts.filter(t=>t.tokens().length).sort((t,e)=>e.totalFiatBalance()-t.totalFiatBalance())[0],this.setToken(this.sendableTokens[0]);this.account&&this.token&&this.toSend||setTimeout(()=>{this.init()},1e3)},selectTokenAndAccount(){i.a.push(a.a.selectTokenAndAccount(t=>{if(!t)return;const{token:e,account:n}=t;this.account=n,this.setToken(e)}))},selectRecipient(){i.a.push(a.a.selectRecipient(this.account?this.account.blockchain():null,t=>{t&&(this.recipient=t)}))},setToken(t){t&&(m.a.setPrices(),this.token=(()=>{const e=this.account.tokens().find(e=>e.uniqueWithChain()===t.uniqueWithChain());if(e)return e.clone();const n=t.clone();return n.amount=0,n})(),this.toSend=this.token.clone(),this.toSend.amount=0,this.fiat=0)},changedFiat(){this.toSend.amount=parseFloat(this.fiat/this.toSend.fiatPrice(!1)).toFixed(this.toSend.decimals)},changedAmount(){this.fiat=this.toSend.amount&&""!==this.toSend.amount?this.toSend.fiatBalance(!1):null},async send(){const t=()=>this.sending=!1;if(!this.canSend)return;if(this.sending=!0,!await p.a.verifyPIN())return t();this.setWorkingScreen(!0);const e=this.account.blockchain(),n=await h.a[e]({account:this.account,recipient:this.recipient,amount:this.toSend.amount,memo:this.memo,token:this.token,promptForSignature:!1}).catch(t=>(console.error("Transfer error",t),!1));t(),this.setWorkingScreen(!1),n&&(n.hasOwnProperty("error")?i.a.push(a.a.snackbar(n.error,"attention-circled")):n?(i.a.push(a.a.transactionSuccess(e,h.a.getTransferId(n,e))),setTimeout(()=>{l.a.loadBalancesFor(this.account)},500)):i.a.push(a.a.snackbar("An error occurred while trying to transfer these tokens.","attention-circled")))}}},k=(n("XuIn"),n("KHd+")),g=Object(k.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"transfer"},[t.account&&t.token&&t.toSend?n("section",{staticClass:"scroller"},[n("section",{staticClass:"greyback"},[n("section",{staticClass:"limit-width"},[n("section",{staticClass:"boxes"},[n("section",{staticClass:"box-container"},[n("label",[t._v("Sending from")]),t._v(" "),n("section",{staticClass:"box nested account-selector flex",on:{click:t.selectTokenAndAccount}},[n("section",{staticClass:"symbol"},[n("TokenSymbol",{attrs:{token:t.token}})],1),t._v(" "),n("section",[n("figure",{staticClass:"name"},[t._v(t._s(t.account.sendable()))]),t._v(" "),n("figure",{staticClass:"network"},[t._v(t._s(t.account.network().name))]),t._v(" "),n("figure",{staticClass:"token"},[t._v(t._s(t.token.amount)+" "+t._s(t.token.symbol))]),t._v(" "),n("figure",{staticClass:"price"},[t._v(t._s(t.token.fiatPrice()||"--"))])]),t._v(" "),n("figure",{staticClass:"chevron fas fa-caret-square-down"})])]),t._v(" "),n("section",{staticClass:"box-container"},[n("label",[t._v("Receiving to")]),t._v(" "),n("section",{staticClass:"box nested"},[n("section",{staticClass:"padded recipient-selector",on:{click:t.selectRecipient}},[n("figure",{staticClass:"name"},[t._v("Contacts")]),t._v(" "),n("figure",{staticClass:"chevron fas fa-caret-square-down"})]),t._v(" "),n("figure",{staticClass:"line"}),t._v(" "),n("section",{staticClass:"input-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.recipient,expression:"recipient"}],staticClass:"input",attrs:{placeholder:"Address / Account"},domProps:{value:t.recipient},on:{input:function(e){e.target.composing||(t.recipient=e.target.value)}}})])])])])])]),t._v(" "),n("section",{staticClass:"whiteback"},[n("section",{staticClass:"limit-width"},[n("label",[t._v("Amount & Details")]),t._v(" "),n("section",{staticClass:"boxes"},[n("section",{staticClass:"box"},[n("section",{staticClass:"input-container"},[n("figure",{staticClass:"label"},[t._v(t._s(t.token.truncatedSymbol()))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.toSend.amount,expression:"toSend.amount"}],staticClass:"input",attrs:{placeholder:"0.00"},domProps:{value:t.toSend.amount},on:{input:[function(e){e.target.composing||t.$set(t.toSend,"amount",e.target.value)},t.changedAmount]}}),t._v(" "),n("section",{staticClass:"amount-helpers"},[n("Button",{attrs:{small:"1",text:"50%"},nativeOn:{click:function(e){return t.toSend.amount=t.token.amount/2,void t.changedAmount()}}}),t._v(" "),n("Button",{attrs:{small:"1",text:"100%"},nativeOn:{click:function(e){return t.toSend.amount=t.token.amount,void t.changedAmount()}}})],1)]),t._v(" "),n("figure",{staticClass:"line"}),t._v(" "),n("section",{staticClass:"input-container"},[n("figure",{staticClass:"label"},[t._v(t._s(t.displayCurrency))]),t._v(" "),t.toSend.fiatPrice()?n("input",{directives:[{name:"model",rawName:"v-model",value:t.fiat,expression:"fiat"}],staticClass:"input",attrs:{placeholder:"0.00"},domProps:{value:t.fiat},on:{input:[function(e){e.target.composing||(t.fiat=e.target.value)},t.changedFiat]}}):n("figure",{staticClass:"input not-available"},[t._v("Price not available")])])]),t._v(" "),n("section",{staticClass:"box"},[n("section",{staticClass:"input-container"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.memo,expression:"memo"}],staticClass:"input",attrs:{placeholder:"optional memo"},domProps:{value:t.memo},on:{input:function(e){e.target.composing||(t.memo=e.target.value)}}})])])])])])]):n("section",{staticClass:"scroller loading-tokens"},[t._m(0)]),t._v(" "),n("section",{staticClass:"tail"},[n("Button",{attrs:{disabled:!t.canSend,big:"1",text:"Send",blue:"1"},nativeOn:{click:function(e){return t.send(e)}}})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("h1",[this._v("Please Wait")]),this._v(" "),e("p",[this._v("Your balances aren't finished loading yet.")])])}],!1,null,"f395230c",null);e.default=g.exports},e0Nc:function(t,e,n){(t.exports=n("JPst")(!1)).push([t.i,".loading-tokens[data-v-f395230c]{display:flex;justify-content:center;align-items:center;text-align:center}\n",""])}}]);