(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"5lq1":function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r("o0o1")),i=a(r("yXPU")),s=a(r("lwsE")),c=a(r("W8MJ")),o=a(r("bUKF")),f=a(r("IMve")),l=n(r("qjwK")),d=(r("F+MN"),a(r("pk5N"))),p=a(r("KLk5")),h=!1,k=function(){function e(){(0,s.default)(this,e)}var t,r,n,a,k,y,v;return(0,c.default)(e,null,[{key:"addAccount",value:(v=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=d.default.get().state.scatter.clone()).keychain.addAccount(t),e.abrupt("return",d.default.get().dispatch(l.SET_SCATTER,r));case 3:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})},{key:"removeAccounts",value:(y=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.default.get().state.scatter.clone(),t.map((function(e){return r.keychain.removeAccount(e)})),e.next=4,d.default.get().dispatch(l.SET_SCATTER,r);case 4:return e.abrupt("return",p.default.removeStaleBalances());case 5:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})},{key:"importAllAccounts",value:(k=(0,i.default)(u.default.mark((function t(r){var n,a,s,c,o=arguments;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],a=o.length>2&&void 0!==o[2]?o[2]:null,s=o.length>3&&void 0!==o[3]?o[3]:null,c=o.length>4&&void 0!==o[4]&&o[4],t.abrupt("return",new Promise(function(){var t=(0,i.default)(u.default.mark((function t(o){var h,k,y,v;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=d.default.get().state.scatter.clone(),k=[],s||(s=h.settings.networks),a||(a=r.blockchains),t.next=6,Promise.all(a.map(function(){var t=(0,i.default)(u.default.mark((function t(a){var i,c;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=f.default.plugin(a),c=s.filter((function(e){return e.blockchain===a})),!n||!i.accountsAreImported()){t.next=4;break}return t.abrupt("return",!0);case 4:return t.abrupt("return",e.accountsFrom(i,c,k,r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return y=k.map((function(e){return e.unique()})),v=h.keychain.accounts.filter((function(e){return e.keypairUnique===r.unique()&&!y.includes(e.unique())&&a.includes(e.blockchain)})),h=d.default.get().state.scatter.clone(),c||v.map((function(e){return h.keychain.removeAccount(e)})),k.map((function(e){return h.keychain.addAccount(e)})),t.next=13,p.default.removeStaleBalances();case 13:return t.next=15,d.default.get().dispatch(l.SET_SCATTER,h);case 15:setTimeout((function(){o(k)}),100);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t)}))),function(e){return k.apply(this,arguments)})},{key:"importAllAccountsForNetwork",value:(a=(0,i.default)(u.default.mark((function t(r){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,i.default)(u.default.mark((function t(n){var a,s,c,o,p;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=d.default.get().state.scatter.clone(),s=r.blockchain,c=a.keychain.keypairs.filter((function(e){return e.blockchains.includes(s)})),o=[],p=f.default.plugin(r.blockchain),t.next=7,Promise.all(c.map(function(){var t=(0,i.default)(u.default.mark((function t(n){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.accountsFrom(p,[r],o,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 7:return a=d.default.get().state.scatter.clone(),o.map((function(e){return a.keychain.addAccount(e)})),t.next=11,d.default.get().dispatch(l.SET_SCATTER,a);case 11:n(o);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(e){return a.apply(this,arguments)})},{key:"accountsFrom",value:(n=(0,i.default)(u.default.mark((function e(t,r,n,a){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,i.default)(u.default.mark((function e(s){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.accountsAreImported()){e.next=9;break}return e.next=3,Promise.all(r.map(function(){var e=(0,i.default)(u.default.mark((function e(r){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getImportableAccounts(a,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:e.t0=function(e,t){return t.map((function(e){n.push(e)})),e},e.t1=[],e.sent.reduce(e.t0,e.t1),s(!0),e.next=11;break;case 9:r.map((function(e){var t=a.publicKeys.find((function(t){return t.blockchain===e.blockchain}));t&&n.push(o.default.fromJson({keypairUnique:a.unique(),networkUnique:e.unique(),publicKey:t.key}))})),s(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e,t,r,a){return n.apply(this,arguments)})},{key:"incrementAccountLogins",value:(r=(0,i.default)(u.default.mark((function e(t){var r,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map((function(e){return e.unique()})),(n=d.default.get().state.scatter.clone()).keychain.accounts.filter((function(e){return r.includes(e.unique())})).map((function(e){return e.logins++})),e.abrupt("return",d.default.get().dispatch(l.SET_SCATTER,n));case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"fixOrphanedAccounts",value:(t=(0,i.default)(u.default.mark((function e(){var t,r,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return",!0);case 2:if(h=!0,t=d.default.get().state.scatter.clone(),r=t.keychain.keypairs.map((function(e){return e.unique()})),(n=t.keychain.accounts.filter((function(e){return!r.includes(e.keypairUnique)}))).length){e.next=8;break}return e.abrupt("return",!0);case 8:return n.map((function(e){return t.keychain.removeAccount(e)})),e.next=11,p.default.removeStaleBalances();case 11:return e.abrupt("return",d.default.get().dispatch(l.SET_SCATTER,t));case 12:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();t.default=k},"7OSH":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("Wyx5")),u=n(r("fEu1")),i=n(r("F52L")),s=n(r("XtJ5")),c=n(r("SUCZ")),o={apis:a.default,apps:u.default,blockchain:i.default,secure:s.default,utility:c.default};t.default=o},"9s7N":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("lwsE")),u=n(r("W8MJ")),i=r("F+MN"),s=n(r("IMve")),c=n(r("DgqZ")),o=r("MPB0"),f=function(){function e(){(0,a.default)(this,e)}return(0,u.default)(e,null,[{key:"getExplorers",value:function(){var e={};i.BlockchainsArray.map((function(t){var r=t.value;return e[r]=[]}));var t=function(){e=s.default.defaultExplorers()};return Promise.race([new Promise((function(r){return setTimeout((function(){t(),r(e)}),3e3)})),(0,o.GET)("explorers").then((function(t){return i.BlockchainsArray.map((function(r){var n=r.value;t[(0,i.blockchainName)(n)].map((function(t){e[n].push(c.default.fromRaw(t))}))})),e})).catch((function(r){return t(),e}))])}}]),e}();t.default=f},B9Ha:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r("o0o1")),i=a(r("yXPU")),s=a(r("lwsE")),c=a(r("W8MJ")),o=n(r("qjwK")),f=a(r("5lq1")),l=a(r("KLk5")),d=a(r("IMve")),p=a(r("pk5N")),h=function(){function e(){(0,s.default)(this,e)}var t,r,n;return(0,c.default)(e,null,[{key:"addNetwork",value:(n=(0,i.default)(u.default.mark((function e(t){var r,n,a,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.default.get().state.scatter.clone(),!(n=r.settings.networks).find((function(e){return e.id===t.id}))){e.next=4;break}return e.abrupt("return");case 4:if(t.name.length){e.next=6;break}return e.abrupt("return",{error:"Missing Name"});case 6:if(t.host.length){e.next=8;break}return e.abrupt("return",{error:"Missing Host"});case 8:if(t.port){e.next=10;break}return e.abrupt("return",{error:"Missing Port"});case 10:if(t.chainId){e.next=12;break}return e.abrupt("return",{error:"Missing Chain"});case 12:if(t.setPort(),!n.find((function(e){return e.blockchain===t.blockchain&&e.chainId===t.chainId}))){e.next=15;break}return e.abrupt("return",{error:"Chain Exists"});case 15:if(!n.find((function(e){return e.name.toLowerCase()===t.name.toLowerCase()}))){e.next=17;break}return e.abrupt("return",{error:"Name Exists"});case 17:return r.settings.updateOrPushNetwork(t),e.next=20,p.default.get().dispatch(o.SET_SCATTER,r);case 20:return e.next=22,f.default.importAllAccountsForNetwork(t);case 22:if(!(a=e.sent).length){e.next=31;break}i=0;case 25:if(!(i<a.length)){e.next=31;break}return e.next=28,l.default.loadBalancesFor(a[i]);case 28:i++,e.next=25;break;case 31:return d.default.bustCaches(),e.abrupt("return",!0);case 33:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"removeNetwork",value:(r=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.default.bustCaches(),(r=p.default.get().state.scatter.clone()).keychain.accounts.filter((function(e){return e.networkUnique===t.unique()})).map((function(e){return r.keychain.removeAccount(e)})),r.settings.removeNetwork(t),p.default.get().dispatch(o.SET_SCATTER,r),l.default.removeStaleBalances(),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"updateNetwork",value:(t=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=p.default.get().state.scatter.clone()).settings.updateOrPushNetwork(t),e.next=4,p.default.get().dispatch(o.SET_SCATTER,r);case 4:return d.default.bustCaches(),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();t.default=h},F52L:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("5lq1")),u=n(r("KLk5")),i=n(r("9s7N")),s=n(r("B9Ha")),c=n(r("diYo")),o=n(r("M1Dr")),f={AccountService:a.default,BalanceService:u.default,ExplorerService:i.default,NetworkService:s.default,ResourceService:c.default,TransferService:o.default};t.default=f},KLk5:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i=a(r("o0o1")),s=a(r("yXPU")),c=a(r("lwsE")),o=a(r("W8MJ")),f=a(r("IMve")),l=n(r("qjwK")),d=a(r("pk5N")),p=function(){function e(){(0,c.default)(this,e)}var t,r,n;return(0,o.default)(e,null,[{key:"loadBalancesFor",value:(n=(0,s.default)(i.default.mark((function e(t){var r,n,a,u,s,c=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,n=t.blockchain(),a=f.default.plugin(n),u=d.default.get().state.scatter.allTokens().filter((function(e){return e.blockchain===n})).filter((function(e){return e.chainId===t.network().chainId})),e.next=7,a.balancesFor(t,u);case 7:if(s=e.sent,!r){e.next=10;break}return e.abrupt("return",{account:t.identifiable(),balances:s});case 10:return e.abrupt("return",d.default.get().dispatch(l.SET_BALANCES,{account:t.identifiable(),balances:s}));case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),function(e){return n.apply(this,arguments)})},{key:"loadAllBalances",value:(r=(0,s.default)(i.default.mark((function e(){var t,r,n,a,c,o=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]&&o[0],r=o.length>1&&void 0!==o[1]&&o[1],t||!(u<+new Date+3e5)){e.next=4;break}return e.abrupt("return");case 4:u=+new Date,n=d.default.get().state.scatter.keychain.accounts.reduce((function(e,t){return e.find((function(e){return e.identifiable()===t.identifiable()}))||e.push(t),e}),[]).sort(function(){var e=(0,s.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.default.plugin(t.blockchain()).isEndorsedNetwork(t.network()),e.abrupt("return",r?-1:1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a=[],c=0;case 8:if(!(c<n.length)){e.next=14;break}return e.next=11,Promise.race([new Promise((function(e){return setTimeout((function(){return e()}),2e4)})),this.loadBalancesFor(n[c]).then((function(e){return a.push(e)}))]);case 11:c++,e.next=8;break;case 14:if(!r){e.next=16;break}return e.abrupt("return",a);case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"removeStaleBalances",value:function(){var e=d.default.get().state.scatter.keychain.accounts.map((function(e){return e.identifiable()})),t=Object.keys(d.default.get().state.balances).filter((function(t){return!e.includes(t)}));return d.default.get().dispatch(l.REMOVE_BALANCES,t)}},{key:"loadUntouchables",value:(t=(0,s.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.default.plugin(t.blockchain()),e.abrupt("return",r.hasUntouchableTokens()?r.untouchableBalance(t):[]);case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"totalBalances",value:function(){var e={totals:{}},t=d.default.get().state.balances;return Object.keys(t).map(function(){var r=(0,s.default)(i.default.mark((function r(n){var a;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=d.default.get().state.scatter.keychain.accounts.find((function(e){return e.identifiable()===n}))){r.next=3;break}return r.abrupt("return");case 3:if(e.hasOwnProperty(a.networkUnique)||(e[a.networkUnique]={}),t.hasOwnProperty(n)&&t[n]){r.next=6;break}return r.abrupt("return");case 6:t[n].map((function(t){e[a.networkUnique].hasOwnProperty(t.uniqueWithChain())?(e[a.networkUnique][t.uniqueWithChain()].add(t.amount),e.totals[t.uniqueWithChain()].add(t.amount)):(e[a.networkUnique][t.uniqueWithChain()]=t.clone(),e.totals[t.uniqueWithChain()]=t.clone())}));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),e}}]),e}();t.default=p},M1Dr:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r("o0o1")),i=a(r("yXPU")),s=a(r("lwsE")),c=a(r("W8MJ")),o=r("F+MN"),f=a(r("IMve")),l=a(r("ssXz")),d=n(r("qjwK")),p=a(r("pk5N")),h=function(){function e(){(0,s.default)(this,e)}var t,r,n,a,h;return(0,c.default)(e,null,[{key:o.Blockchains.BTC,value:(h=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.baseTransfer(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:o.Blockchains.ETH,value:(a=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.baseTransfer(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:o.Blockchains.TRX,value:(n=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.baseTransfer(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:o.Blockchains.EOSIO,value:(r=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.recipient=t.recipient.toLowerCase(),e.abrupt("return",this.baseTransfer(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"baseTransfer",value:(t=(0,i.default)(u.default.mark((function e(t){var r,n,a,i,s,c,o;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.account,n=t.recipient,a=t.amount,i=t.memo,s=t.token,f.default.plugin(r.blockchain()),e.next=4,f.default.plugin(r.blockchain()).transfer({account:r,to:n,amount:a,token:s,memo:i}).catch((function(e){return e}));case 4:if(null===(c=e.sent)){e.next=12;break}if(!c.hasOwnProperty("error")){e.next=10;break}return e.abrupt("return",c);case 10:return t.bypassHistory||(o=new l.default(r,n,s,a,i,this.getTransferId(c,s.blockchain)),p.default.get().dispatch(d.DELTA_HISTORY,o)),e.abrupt("return",c);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getTransferId",value:function(e,t){switch(t){case o.Blockchains.EOSIO:return e.transaction_id;case o.Blockchains.TRX:return e.txID;case o.Blockchains.ETH:return e.transactionHash;case o.Blockchains.BTC:return e.txid}return null}}]),e}();t.default=h},MPB0:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.POST=t.GET=void 0;var a=n(r("o0o1")),u=n(r("yXPU")),i=n(r("lwsE")),s=n(r("W8MJ")),c=n(r("J4zp")),o=n(r("SDtL")),f=n(r("Giuh")),l="https://api.get-scatter.com/v1/",d=function(){var e=o.default.text(64);return[e,{Accept:"application/json","Content-Type":"application/json",proof:e}]},p=function(e,t){try{var r=t.headers.get("proof");if(!r)throw"Invalid API Request";if("EOS62b3WxfuRyP7JYaDbF3gr49joLWYpsF3kPmo2HPxPuGRDiRUwj"!==f.default.recover(r,e))throw"Invalid API Request";return t.json()}catch(e){throw"Invalid API Request"}},h=function(e){var t=d(),r=(0,c.default)(t,2),n=r[0],a=r[1];return fetch("".concat(l).concat(e),{method:"GET",mode:"cors",headers:a}).then((function(e){return p(n,e)}))};t.GET=h;var k=function(e,t){var r=d(),n=(0,c.default)(r,2),a=n[0],u=n[1];return fetch("".concat(l).concat(e),{method:"POST",mode:"cors",headers:u,body:JSON.stringify(t)}).then((function(e){return p(a,e)}))};t.POST=k;var y=function(){function e(){(0,i.default)(this,e)}var t,r,n;return(0,s.default)(e,null,[{key:"apps",value:(n=(0,u.default)(a.default.mark((function e(){var t,r=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],e.abrupt("return",k("apps",{apps:t}));case 2:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"checkMachineId",value:(r=(0,u.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h("machine/".concat(t)));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"createAccount",value:(t=(0,u.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k("create_bridge",t));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();t.default=y},TmN8:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,i=a(r("o0o1")),s=a(r("yXPU")),c=a(r("lwsE")),o=a(r("W8MJ")),f=n(r("qjwK")),l=a(r("GwxU")),d=r("MPB0"),p=a(r("pk5N")),h=r("upjY"),k=function(){function e(){(0,c.default)(this,e)}var t,r,n,a,k,y;return(0,o.default)(e,null,[{key:"watchPrices",value:(y=(0,s.default)(i.default.mark((function t(){var r,n=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(n.length>0&&void 0!==n[0])||n[0],clearInterval(u),r){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",new Promise(function(){var t=(0,s.default)(i.default.mark((function t(r){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){var t=(0,s.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setPrices();case 2:r(!0);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,n();case 3:u=setInterval((0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)}))),18e5);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t)}))),function(){return y.apply(this,arguments)})},{key:"setPrices",value:(k=(0,s.default)(i.default.mark((function t(){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAll();case 2:if(!(r=t.sent)||!Object.keys(r).length){t.next=6;break}return t.next=6,p.default.get().dispatch(f.SET_PRICES,r);case 6:case"end":return t.stop()}}),t)}))),function(){return k.apply(this,arguments)})},{key:"getAll",value:function(){return Promise.race([new Promise((function(e){return setTimeout((function(){return e(!1)}),1e4)})),(0,d.GET)("prices?v2=true").catch((function(){return{error:"Problem connecting to Prices API"}}))])}},{key:"getCurrencies",value:(a=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.race([new Promise((function(e){return setTimeout((function(){return e(!1)}),1e4)})),(0,d.GET)("currencies").catch((function(){return["USD"]}))]));case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"getCurrencyPrices",value:(n=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.race([new Promise((function(e){return setTimeout((function(){return e(!1)}),1e4)})),(0,d.GET)("currencies/prices").catch((function(){return null}))]));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"loadPriceTimelineData",value:(r=(0,s.default)(i.default.mark((function t(){var r,n,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCurrencyPrices();case 2:return r=t.sent,t.next=5,e.getTimeline((0,h.dateId)(1));case 5:return n=t.sent,t.next=8,e.getTimeline();case 8:return a=t.sent,t.next=11,p.default.get().dispatch(f.SET_PRICE_DATA,{prices:r,yesterday:n,today:a});case 11:return t.abrupt("return",{prices:r,yesterday:n,today:a});case 12:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"getTimeline",value:(t=(0,s.default)(i.default.mark((function e(){var t,r,n=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:null,r=t?"?date=".concat(t):"",e.abrupt("return",Promise.race([new Promise((function(e){return setTimeout((function(){return e(!1)}),1e4)})),(0,d.GET)("prices/timeline"+r).catch((function(){}))]));case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"getTotal",value:function(e,t,r,n){if(t||(t=p.default.get().state.scatter.settings.displayCurrency),!r&&n){if(e.hasOwnProperty(n))return e[n];var a=(n instanceof l.default?n:l.default.fromUnique(n)).clone();return a.amount=parseFloat(0).toFixed(a.decimals),a}var u=0;return Object.keys(p.default.get().state.prices).map((function(r){var n=e[r];if(n){var a=p.default.get().state.prices[r][t],i=parseFloat(parseFloat(n.amount)*parseFloat(a));if(isNaN(i))return;u+=i}})),l.default.fromJson({symbol:this.fiatSymbol(t),amount:u.toFixed(2),decimals:2})}},{key:"fiatSymbol",value:function(e){switch(e||(e=p.default.get().state.scatter.settings.displayCurrency),e){case"USD":case"AUD":case"CAD":return"$";case"CNY":case"JPY":return"¥";case"EUR":return"€";case"GBP":return"£";default:return e}}}]),e}();t.default=k},Wyx5:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("Z4q2")),u=n(r("MPB0")),i=n(r("l31u")),s=n(r("TmN8")),c={ApiService:a.default,BackendApiService:u.default,ExchangeService:i.default,PriceService:s.default};t.default=c},Z4q2:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r("cDf5")),i=a(r("o0o1")),s=a(r("yXPU")),c=a(r("lwsE")),o=a(r("W8MJ")),f=n(r("+nw1")),l=n(r("qjwK")),d=a(r("UYLU")),p=a(r("zugy")),h=a(r("SDtL")),k=a(r("5lq1")),y=a(r("eOAV")),v=a(r("O1cq")),m=a(r("diYo")),b=a(r("IMve")),w=r("F+MN"),g=a(r("Hxfq")),x=n(r("EY8S")),P=a(r("bUKF")),T=a(r("Jimu")),A=a(r("78si")),E=(a(r("hfoK")),a(r("GwxU"))),O=a(r("ONSl")),q=a(r("KLk5")),S=a(r("pk5N")),R=a(r("z/LQ")),_=a(r("YRtA")),I=a(r("r6PA")),F=[],j=function(){function e(){(0,c.default)(this,e)}var t,r,n,a,j,N,C,M,U,K,J,D,B,L,G,Y,H,W;return(0,o.default)(e,null,[{key:"blockRoutes",value:function(e){F=e}},{key:"handler",value:(W=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(f).map((function(e){return f[e]})).includes(t.type)){e.next=2;break}return e.abrupt("return");case 2:if(!F.includes(t.type)){e.next=4;break}return e.abrupt("return",{id:t.id,result:T.default.malicious("This wallet has turned this API route off.")});case 4:return e.next=6,this[t.type](t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return W.apply(this,arguments)})},{key:f.LOGIN,value:(H=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loginHandler(t,!1));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)})},{key:f.LOGIN_ALL,value:(Y=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loginHandler(t,!0));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return Y.apply(this,arguments)})},{key:"loginHandler",value:(G=(0,s.default)(i.default.mark((function e(t,r){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid format";return e({id:t.id,result:T.default.malicious(r)})};if(2!==Object.keys(t.payload).length)return n();if(!t.payload.hasOwnProperty("fields"))return n();if("object"!==(0,u.default)(t.payload.fields))return n();var a=t.payload,c=a.origin,o=a.fields;o.hasOwnProperty("personal")||(o.personal=[]),o.hasOwnProperty("location")||(o.location=[]),o.hasOwnProperty("accounts")||(o.accounts=[]),o.personal=o.personal.filter((function(e){return!!e})),o.location=o.location.filter((function(e){return!!e})),o.accounts=o.accounts.filter((function(e){return!!e}));var f=o.accounts.map((function(e){return A.default.fromJson(e)})).map((function(e){return e.unique()})).reduce((function(e,t){return e.includes(t)||e.push(t),e}),[]);if(!r&&f.length>1)return e({id:t.id,result:T.default.signatureError("too_many_accounts","To login more than one account you must use the `getAllAccounts()` API method.")});var l=S.default.get().state.scatter.settings.networks.filter((function(e){return f.includes(e.unique())}));if(l.length!==f.length)return e({id:t.id,result:T.default.noNetwork()});var d=l.map((function(e){return e.accounts()})).reduce((function(e,t){return e=e.concat(t)}),[]),p=y.default.identityFromPermissions(c);if(p){var h=o.personal.every((function(e){return p.hasOwnProperty("personal")&&p.personal.hasOwnProperty(e)})),v=o.location.every((function(e){return p.hasOwnProperty("location")&&p.location.hasOwnProperty(e)})),m=!0;if(r&&d.length!==p.accounts.length?m=!1:!r&&p.accounts.length>1&&(m=!1),h&&v&&m)return e({id:t.id,result:p})}_.default.emit("popout",t).then(function(){var n=(0,s.default)(i.default.mark((function n(a){var u,s,f,l,p;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=a.result){n.next=3;break}return n.abrupt("return",e({id:t.id,result:T.default.signatureError("identity_rejected","User rejected the provision of an Identity")}));case 3:return s=S.default.get().state.scatter.keychain.identities.find((function(e){return e.id===u.identity.id})),n.next=6,s.setAsLastUsed();case 6:return f=x.LocationInformation.fromJson(u.location),l=r?d:(u.accounts||[]).map((function(e){return P.default.fromJson(e)})),n.next=10,y.default.addIdentityOriginPermission(s,l,o,c);case 10:(p=s.asOnlyRequiredFields(o,f)).accounts=l.map((function(e){return e.asReturnable()})),!r&&l.length&&k.default.incrementAccountLogins(l),e({id:t.id,result:p});case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return G.apply(this,arguments)})},{key:f.SIGN,value:(L=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,s.default)(i.default.mark((function e(r){var n,a,u,c,o,f,l,p,h,k,w,g,P,E,O,q;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,a=n.origin,u=n.requiredFields,c=n.blockchain,o=y.default.identityFromPermissions(a,!1)){e.next=5;break}return e.abrupt("return",r({id:t.id,result:T.default.identityMissing()}));case 5:if(n.identityKey=o.publicKey,f=b.default.plugin(c),l=S.default.get().state.scatter.settings.networks.find((function(e){return e.unique()===A.default.fromJson(n.network).unique()}))){e.next=10;break}return e.abrupt("return",r({id:t.id,result:T.default.noNetwork()}));case 10:return n.network=l,e.next=13,f.requestParser(n,l,n.abi||null);case 13:if(n.messages=e.sent,n.messages){e.next=16;break}return e.abrupt("return",r({id:t.id,result:T.default.cantParseTransaction()}));case 16:if(!(p=n.messages.map((function(e){return"".concat(c,"::").concat(e.code,"::").concat(e.type)})).filter((function(e){return S.default.get().state.scatter.settings.isActionBlacklisted(e)}))).length){e.next=20;break}return _.default.emit("firewalled",{actions:p,payload:n}),e.abrupt("return",r({id:t.id,result:T.default.malicious("firewalled")}));case 20:if(h=o.accounts.map((function(e){return e.formatted()})),(k=d.default.distinct(f.actionParticipants(n)).filter((function(e){return h.includes(e)})).map((function(e){return o.accounts.find((function(t){return t.formatted()===e}))}))).length){e.next=24;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureAccountMissing()}));case 24:if(n.participants=k,(g=function(){return w=S.default.get().state.scatter.keychain.identities.find((function(e){return e.publicKey===o.publicKey}))})(),P=function(){var e=(0,s.default)(i.default.mark((function e(a){var c,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(k.map(function(){var e=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.default.sign(l,n,t.publicKey));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:if((c=e.sent).length===k.length){e.next=5;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureAccountMissing()}));case 5:if(1!==c.length||null!==c[0]){e.next=7;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureError("signature_rejected","User rejected the signature request")}));case 7:if(!c.some((function(e){return!e}))){e.next=9;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureError("missing_sig","A signature for this request was missing")}));case 9:o=x.default.asReturnedFields(u,w,a),r({id:t.id,result:{signatures:c,returnedFields:o}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=S.default.get().state.scatter.keychain.findApp(a),O=k.some((function(e){return v.default.isHardware(e.publicKey)})),!E||O||!y.default.isWhitelistedTransaction(a,w,k,n.messages,u)){e.next=35;break}return S.default.get().state.scatter.settings.showNotifications&&R.default.pushNotification("Signed Transaction","".concat(a," - ").concat(k.map((function(e){return e.sendable()})).join(","))),e.next=34,P(w.getLocation());case 34:return e.abrupt("return",e.sent);case 35:(q={}).type=t.type,q.appkey=t.appkey,q.payload={messages:t.payload.messages,network:t.payload.network,origin:t.payload.origin,participants:t.payload.participants,requiredFields:t.payload.requiredFields},_.default.emit("popout",q).then(function(){var e=(0,s.default)(i.default.mark((function e(n){var c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.result){e.next=3;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureError("signature_rejected","User rejected the signature request")}));case 3:if(g(),!c.needResources){e.next=7;break}return e.next=7,Promise.all(c.needResources.map(function(){var e=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.addResources(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.next=9,y.default.addIdentityRequirementsPermission(a,w,u);case 9:return e.next=11,y.default.addActionPermissions(a,w,k,c.whitelists);case 11:return e.next=13,P(c.selectedLocation);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)})},{key:f.SIGN_ARBITRARY,value:(B=(0,s.default)(i.default.mark((function e(t){var r,n=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:null,e.abrupt("return",new Promise(function(){var e=(0,s.default)(i.default.mark((function e(n){var a,u,c,o,f,l,d,p,h;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.payload,u=t.payload,c=u.origin,o=u.publicKey,!(f=u.data).split(" ").some((function(e){return e.length>12}))){e.next=4;break}return e.abrupt("return",n({id:t.id,result:T.default.malicious("You can not sign strings where any of the words are over 12 characters.")}));case 4:if(!r){e.next=8;break}a.identityKey=r,e.next=12;break;case 8:if(l=y.default.identityFromPermissions(c,!1)){e.next=11;break}return e.abrupt("return",n({id:t.id,result:T.default.identityMissing()}));case 11:a.identityKey=l.publicKey;case 12:if(d=v.default.getKeyPairFromPublicKey(o)){e.next=15;break}return e.abrupt("return",n({id:t.id,result:T.default.signatureError("signature_rejected","User rejected the signature request")}));case 15:p=d.publicKeys.find((function(e){return e.key===o})).blockchain,h=A.default.fromJson({blockchain:p}),a.messages=[{code:"".concat((0,w.blockchainName)(p)," Key"),type:"Arbitrary Signature",data:{signing:f}}],_.default.emit("popout",Object.assign(t,{})).then(function(){var e=(0,s.default)(i.default.mark((function e(r){var u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((u=r.result)&&u.accepted){e.next=3;break}return e.abrupt("return",n({id:t.id,result:T.default.signatureError("signature_rejected","User rejected the signature request")}));case 3:return e.t0=n,e.t1=t.id,e.next=7,I.default.sign(h,a,o,!0,!1);case 7:e.t2=e.sent,e.t3={id:e.t1,result:e.t2},(0,e.t0)(e.t3);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e){return B.apply(this,arguments)})},{key:f.TRANSFER,value:(D=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=t.payload,n=r.to,a=r.network,u=(r.amount,r.options);if(u||(u={}),!(a=S.default.get().state.scatter.settings.networks.find((function(e){return e.unique()===A.default.fromJson(a).unique()}))))return e({id:t.id,result:T.default.noNetwork()});var c="";u.hasOwnProperty("symbol")&&(c=u.symbol),c=a.systemToken().symbol;var o="";u.hasOwnProperty("contract")&&(o=u.contract),o=a.systemToken().contract,t.payload.memo="eos"===a.blockchain&&u.hasOwnProperty("memo")?u.memo:"",t.payload.symbol=c,t.payload.contract=o,_.default.emit("popout",t).then(function(){var r=(0,s.default)(i.default.mark((function r(u){var s,f,l,d,p;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=u.result){r.next=3;break}return r.abrupt("return",e({id:t.id,result:T.default.signatureError("signature_rejected","User rejected the transfer request")}));case 3:return f=P.default.fromJson(s.account),b.default.plugin(a.blockchain),l=t.payload||{},d=E.default.fromJson({contract:o,blockchain:a.blockchain,symbol:c,decimals:l.decimals||b.default.plugin(a.blockchain).defaultDecimals(),chainId:f.network().chainId}),r.next=9,b.default.plugin(a.blockchain).transfer({account:f,to:n,amount:s.amount,token:d,memo:t.payload.memo,promptForSignature:!1}).catch((function(e){return{error:e}}));case 9:p=r.sent,_.default.emit("transfer",t.payload),e({id:t.id,result:p});case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())})));case 1:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)})},{key:f.GET_PUBLIC_KEY,value:(J=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid format";return e({id:t.id,result:T.default.malicious(r)})};return 2!==Object.keys(t.payload).length?n():t.payload.hasOwnProperty("blockchain")?"string"!=typeof t.payload.blockchain?n():w.BlockchainsArray.map((function(e){return e.value})).includes(t.payload.blockchain)?void _.default.emit("popout",t).then(function(){var r=(0,s.default)(i.default.mark((function r(n){var a,u,s;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=n.result){r.next=3;break}return r.abrupt("return",e({id:t.id,result:T.default.rejected()}));case 3:if(u=g.default.fromJson(a.keypair),s=u.publicKeys.find((function(e){return e.blockchain===t.payload.blockchain})).key,!a.isNew){r.next=11;break}return r.next=8,v.default.saveKeyPair(u);case 8:e({id:t.id,result:s}),r.next=12;break;case 11:e({id:t.id,result:s});case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()):n("no such blockchain"):n()})));case 1:case"end":return e.stop()}}),e)}))),function(e){return J.apply(this,arguments)})},{key:f.UPDATE_IDENTITY,value:(K=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,s.default)(i.default.mark((function e(r){var n,a,u,c,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,a=n.origin,u=n.name,c=n.kyc,n.ridl,!u||!(u.length<2||u.length>21)){e.next=3;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureError("invalid_name","Invalid name length (2 - 21)")}));case 3:if(!c||!c.length){e.next=8;break}if(-1!==c.indexOf("::")){e.next=6;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureError("invalid_kyc","KYC properties must be formatted as: domain::hash")}));case 6:if(/^([A-Za-z0-9:-]+)$/.test(c)){e.next=8;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureError("invalid_kyc","Invalid kyc value ([^A-Za-z0-9:-])")}));case 8:if(o=y.default.identityFromPermissions(a,!1)){e.next=11;break}return e.abrupt("return",r({id:t.id,result:T.default.identityMissing()}));case 11:_.default.emit("popout",Object.assign(t,{})).then(function(){var e=(0,s.default)(i.default.mark((function e(n){var s,f;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.result){e.next=3;break}return e.abrupt("return",r({id:t.id,result:T.default.signatureError("update_rejected","User rejected the update request")}));case 3:return s=S.default.get().state.scatter.clone(),f=s.keychain.identities.find((function(e){return e.id===o.id})),u&&u.length&&(f.name=u),c&&c.length&&(f.name=u),s.keychain.updateOrPushIdentity(f),e.next=10,S.default.get().dispatch(l.SET_SCATTER,s);case 10:r({id:t.id,result:y.default.identityFromPermissions(a,!0)});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return K.apply(this,arguments)})},{key:f.IDENTITY_FROM_PERMISSIONS,value:(U=(0,s.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.default.identityFromPermissions(t.payload.origin,!0),e.abrupt("return",{id:t.id,result:r});case 2:case"end":return e.stop()}}),e)}))),function(e){return U.apply(this,arguments)})},{key:f.GET_AVATAR,value:(M=(0,s.default)(i.default.mark((function e(t){var r,n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n=r.origin,a=y.default.identityFromPermissions(n,!1)){e.next=5;break}return e.abrupt("return",{id:t.id,result:T.default.identityMissing()});case 5:return e.abrupt("return",{id:t.id,result:S.default.get().state.scatter.keychain.avatars[a.id]});case 6:case"end":return e.stop()}}),e)}))),function(e){return M.apply(this,arguments)})},{key:f.AUTHENTICATE,value:(C=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,s.default)(i.default.mark((function e(r){var n,a,u,s,c,o,f,l,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.default.identityFromPermissions(t.payload.origin)){e.next=3;break}return e.abrupt("return",r({id:t.id,result:T.default.identityMissing()}));case 3:if(a=new T.default("invalid_nonce","You must provide a 12 character nonce for authentication"),t.payload.hasOwnProperty("nonce")){e.next=6;break}return e.abrupt("return",r({id:t,result:a}));case 6:if(12===t.payload.nonce.length){e.next=8;break}return e.abrupt("return",r({id:t,result:a}));case 8:if(u=t.payload.hasOwnProperty("publicKey")&&t.payload.publicKey&&t.payload.publicKey.length?t.payload.publicKey:n.publicKey,s=v.default.getKeyPairFromPublicKey(u)){e.next=12;break}return e.abrupt("return",r({id:t.id,result:T.default.noKeypair()}));case 12:return c=t.payload.hasOwnProperty("data")&&t.payload.data&&t.payload.data.length,o=c?t.payload.data:origin,f=p.default.unsaltedQuickHash(p.default.unsaltedQuickHash(o)+p.default.unsaltedQuickHash(t.payload.nonce)),l=A.default.fromJson({blockchain:s.publicKeys.find((function(e){return e.key===u})).blockchain}),e.next=18,I.default.sign(l,{data:f},u,!0,!!c);case 18:d=e.sent,r({id:t.id,result:d});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)})},{key:f.LOGOUT,value:(N=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.removeIdentityPermission(t.payload.origin);case 2:return e.abrupt("return",{id:t.id,result:!0});case 3:case"end":return e.stop()}}),e)}))),function(e){return N.apply(this,arguments)})},{key:f.LINK_ACCOUNT,value:(j=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,s.default)(i.default.mark((function e(r,n){var a,u,s,c,o,f,l,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid format";return r({id:t.id,result:T.default.malicious(e)})},3===Object.keys(t.payload).length){e.next=3;break}return e.abrupt("return",a());case 3:if(t.payload.hasOwnProperty("account")){e.next=5;break}return e.abrupt("return",a());case 5:if(t.payload.hasOwnProperty("network")){e.next=7;break}return e.abrupt("return",a());case 7:if(t.payload.account.hasOwnProperty("publicKey")){e.next=9;break}return e.abrupt("return",a());case 9:if(u=S.default.get().state.scatter.clone(),s=t.payload,c=s.account,o=s.network,f=s.origin,o=S.default.get().state.scatter.settings.networks.find((function(e){return e.unique()===A.default.fromJson(o).unique()}))){e.next=14;break}return e.abrupt("return",r({id:t.id,result:T.default.noNetwork()}));case 14:if(l=u.keychain.keypairs.find((function(e){return e.publicKeys.some((function(e){return e.key===c.publicKey}))}))){e.next=17;break}return e.abrupt("return",r({id:t.id,result:T.default.noKeypair()}));case 17:if(d=P.default.fromJson({keypairUnique:l.unique(),networkUnique:o.unique(),publicKey:c.publicKey,name:c.name||"",authority:c.authority||"",fromOrigin:f}),!u.keychain.accounts.find((function(e){return e.fromOrigin===f&&e.createdAt>+new Date-36e5}))){e.next=20;break}return e.abrupt("return",r({id:t.id,result:new T.default("link_account_timeout","You can only add 1 account every hour.")}));case 20:return e.next=22,k.default.addAccount(d);case 22:return e.abrupt("return",r({id:t.id,result:!0}));case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)})},{key:f.SUGGEST_NETWORK,value:(a=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,s.default)(i.default.mark((function e(r){var n,a,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid format";return r({id:t.id,result:T.default.malicious(e)})},2===Object.keys(t.payload).length){e.next=3;break}return e.abrupt("return",n());case 3:if(t.payload.hasOwnProperty("network")){e.next=5;break}return e.abrupt("return",n());case 5:if(a=t.payload.network,(a=A.default.fromJson(a)).name=t.payload.origin+h.default.text(4),a.hasOwnProperty("token")&&a.token&&(a.token.blockchain=a.blockchain,a.token.name=a.token.name.length?a.token.name:a.token.symbol),a.isValid()){e.next=11;break}return e.abrupt("return",r({id:t.id,result:new T.default("bad_network","The network being suggested is invalid")}));case 11:if(!S.default.get().state.scatter.settings.networks.find((function(e){return e.unique()===a.unique()}))){e.next=13;break}return e.abrupt("return",r({id:t.id,result:!0}));case 13:if(!S.default.get().state.scatter.settings.networks.find((function(e){return e.fromOrigin===t.payload.origin&&e.createdAt>+new Date-432e5}))){e.next=15;break}return e.abrupt("return",r({id:t.id,result:new T.default("network_timeout","You can only add 1 network every 12 hours.")}));case 15:if(!(S.default.get().state.scatter.settings.networks.filter((function(e){return e.createdAt>+new Date-432e5}))>5)){e.next=17;break}return e.abrupt("return",r({id:t.id,result:new T.default("network_timeout","Too many networks were added over the past 12 hours")}));case 17:return a.fromOrigin=t.payload.origin,(u=S.default.get().state.scatter.clone()).settings.networks.push(a),e.next=22,S.default.get().dispatch(l.SET_SCATTER,u);case 22:return e.next=24,k.default.importAllAccountsForNetwork(a);case 24:r({id:t.id,result:!0});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:f.ADD_TOKEN,value:(n=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,s.default)(i.default.mark((function e(r){var n,a,u,s,c,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid format";return r({id:t.id,result:T.default.malicious(e)})},3===Object.keys(t.payload).length){e.next=3;break}return e.abrupt("return",n());case 3:if(t.payload.hasOwnProperty("network")){e.next=5;break}return e.abrupt("return",n());case 5:if(t.payload.hasOwnProperty("token")){e.next=7;break}return e.abrupt("return",n());case 7:if(a=t.payload,u=a.network,s=a.token,u=A.default.fromJson(u),(s=E.default.fromJson(s)).name=s.name.length?s.name:s.symbol,s.blockchain=u.blockchain,s.chainId=u.chainId,s.fromOrigin=t.payload.origin,s.isValid()){e.next=16;break}return e.abrupt("return",r({id:t.id,result:new T.default("invalid_token","The token specified is not a valid token object.")}));case 16:if(!(S.default.get().state.scatter.settings.tokens.filter((function(e){return e.fromOrigin===t.payload.origin&&e.createdAt>+new Date-432e5})).length>5)){e.next=18;break}return e.abrupt("return",r({id:t.id,result:new T.default("token_timeout","You can only add up to 5 tokens every 12 hours.")}));case 18:if(!(S.default.get().state.scatter.settings.tokens.filter((function(e){return e.createdAt>+new Date-432e5})).length>15)){e.next=20;break}return e.abrupt("return",r({id:t.id,result:new T.default("token_timeout","Too many tokens were added over the past 12 hours.")}));case 20:return e.next=22,O.default.hasToken(s);case 22:if(!e.sent){e.next=25;break}return e.abrupt("return",r({id:t.id,result:new T.default("token_exists","The user already has this token in their Scatter.")}));case 25:return e.next=27,O.default.addToken(s);case 27:if(!(c=S.default.get().state.scatter.keychain.accounts.filter((function(e){return e.network().unique()===u.unique()}))).length){e.next=36;break}o=0;case 30:if(!(o<c.length)){e.next=36;break}return e.next=33,q.default.loadBalancesFor(c[o]);case 33:o++,e.next=30;break;case 36:r({id:t.id,result:!0});case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:f.HAS_ACCOUNT_FOR,value:(r=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid format";return e({id:t.id,result:T.default.malicious(r)})};if(2!==Object.keys(t.payload).length)return r();if(!t.payload.hasOwnProperty("network"))return r();var n=t.payload.network;if(!(n=S.default.get().state.scatter.settings.networks.find((function(e){return e.unique()===A.default.fromJson(n).unique()}))))return e({id:t.id,result:T.default.noNetwork()});e({id:t.id,result:!!S.default.get().state.scatter.keychain.accounts.find((function(e){return e.networkUnique===n.unique()}))})})));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:f.GET_VERSION,value:(t=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){e({id:t.id,result:S.default.get().state.scatter.meta.version})})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();t.default=j},diYo:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r("o0o1")),i=a(r("yXPU")),s=a(r("lwsE")),c=a(r("W8MJ")),o=a(r("IMve")),f=(r("F+MN"),a(r("bUKF"))),l=n(r("qjwK")),d=a(r("pk5N")),p=function(){function e(){(0,s.default)(this,e)}var t,r,n,a;return(0,c.default)(e,null,[{key:"usesResources",value:function(e){return e=f.default.fromJson(e),o.default.plugin(e.blockchain()).usesResources()}},{key:"needsResources",value:(a=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.default.fromJson(t),(r=o.default.plugin(t.blockchain())).usesResources()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",r.needsResources(t));case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"addResources",value:(n=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.default.fromJson(t),(r=o.default.plugin(t.blockchain())).usesResources()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",r.addResources(t));case 5:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"getResourcesFor",value:(r=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.default.fromJson(t),(r=o.default.plugin(t.blockchain())).usesResources()){e.next=4;break}return e.abrupt("return",[]);case 4:return e.abrupt("return",r.getResourcesFor(t));case 5:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"cacheResourceFor",value:(t=(0,i.default)(u.default.mark((function t(r){var n;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.getResourcesFor(r);case 4:n=t.sent,d.default.get().dispatch(l.ADD_RESOURCES,{acc:r.identifiable(),res:n});case 6:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}]),e}();t.default=p},eOAV:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r("o0o1")),i=a(r("yXPU")),s=a(r("lwsE")),c=a(r("W8MJ")),o=n(r("qjwK")),f=a(r("Ouh5")),l=r("EY8S"),d=a(r("btL5")),p=a(r("pk5N")),h=function(){function e(){(0,s.default)(this,e)}var t,r,n,a,h,k,y,v;return(0,c.default)(e,null,[{key:"identityFromPermissions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=p.default.get().state.scatter.keychain.permissions,n=r.find((function(t){return t.isIdentityPermissionFor(e)}));if(n){var a=l.IdentityRequiredFields.fromPermission(n.identityRequirements),u=t?n.getIdentity().asOnlyRequiredFields(a):n.getIdentity();return u?(u.accounts=n.getAccounts().map((function(e){return t?e.asReturnable():e})),u):null}return null}},{key:"addIdentityOriginPermission",value:(v=(0,i.default)(u.default.mark((function e(t,r,n,a){var i,s;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(n=l.IdentityRequiredFields.fromJson(n)).forPermission(),e.next=4,this.removeIdentityPermission(a);case 4:return i=p.default.get().state.scatter.clone(),s=f.default.fromAction(a,t,r,{identityRequirements:n,isIdentity:!0}),i.keychain.permissions.push(s),e.abrupt("return",p.default.get().dispatch(o.SET_SCATTER,i));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return v.apply(this,arguments)})},{key:"removeIdentityPermission",value:(y=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=p.default.get().state.scatter.clone()).keychain.permissions=r.keychain.permissions.filter((function(e){return!e.isIdentity||e.isIdentity&&e.origin!==t})),e.abrupt("return",p.default.get().dispatch(o.SET_SCATTER,r));case 3:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})},{key:"addIdentityRequirementsPermission",value:(k=(0,i.default)(u.default.mark((function e(t,r,n){var a,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=l.IdentityRequiredFields.fromJson(n)).isEmpty()){e.next=3;break}return e.abrupt("return");case 3:if(n=n.forPermission(),a=p.default.get().state.scatter.clone(),i=f.default.fromJson({origin:t,identity:r.id,identityRequirements:n,isIdentityRequirements:!0}),!a.keychain.permissions.find((function(e){return e.checksum()===i.checksum()}))){e.next=8;break}return e.abrupt("return");case 8:return a.keychain.permissions.push(i),e.abrupt("return",p.default.get().dispatch(o.SET_SCATTER,a));case 10:case"end":return e.stop()}}),e)}))),function(e,t,r){return k.apply(this,arguments)})},{key:"hasIdentityRequirementsPermission",value:function(e,t,r){r=(r=l.IdentityRequiredFields.fromJson(r)).forPermission();var n=f.default.fromJson({origin:e,identity:t.id,identityRequirements:r,isIdentityRequirements:!0});return p.default.get().state.scatter.keychain.permissions.find((function(e){return e.checksum()===n.checksum()}))}},{key:"createActionPermission",value:function(e,t,r,n){var a=f.default.createImmutableFieldsHash(n.fields,n.props),u=f.default.fromAction(e,t,r,{contract:n.code,contractHash:n.hash||null,action:n.type,immutableActionFields:a,mutableActionFields:n.props,timestamp:+new Date,isContractAction:!0});p.default.get().state.scatter.clone();return u}},{key:"addActionPermissions",value:(h=(0,i.default)(u.default.mark((function t(r,n,a,i){var s,c;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&i.length){t.next=2;break}return t.abrupt("return");case 2:if(!(s=i.map((function(t){return e.createActionPermission(r,n,a,t)})).filter((function(e){return e}))).length){t.next=8;break}return c=p.default.get().state.scatter.clone(),s.map((function(e){var t=c.keychain.permissions.filter((function(t){return t.origin===r&&t.isContractAction&&t.contract===e.contract&&t.action===e.action})).map((function(e){return e.id}));c.keychain.permissions=c.keychain.permissions.filter((function(e){return!t.includes(e.id)})),c.keychain.permissions.push(e)})),t.next=8,p.default.get().dispatch(o.SET_SCATTER,c);case 8:case"end":return t.stop()}}),t)}))),function(e,t,r,n){return h.apply(this,arguments)})},{key:"hasActionPermission",value:function(e,t,r,n){var a=n.code,u=n.type,i=f.default.fromAction(e,t,r,{contract:a,contractHash:null,action:u,isContractAction:!0}),s=p.default.get().state.scatter.keychain.permissions.filter((function(e){return e.checksum()===i.checksum()}));return!!s.length&&s.some((function(e){var t=f.default.createImmutableFieldsHash(n.data,e.mutableActionFields);return e.immutableActionFields===t}))}},{key:"isWhitelistedTransaction",value:function(t,r,n,a,u){return u=l.IdentityRequiredFields.fromJson(u),!!a.every((function(a){return e.hasActionPermission(t,r,n,a)}))&&(!!u.isEmpty()||e.hasIdentityRequirementsPermission(t,r,u))}},{key:"checkAppLinkPermissions",value:function(e){p.default.get().state.scatter.keychain.permissions.filter((function(t){return t.origin===e})).length||d.default.sendEvent("logout",{},e)}},{key:"removeAllPermissions",value:(a=(0,i.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=p.default.get().state.scatter.clone()).keychain.permissions=[],t.keychain.apps.map((function(e){t.keychain.removeApp(e),d.default.sendEvent("logout",{},e.origin)})),e.abrupt("return",p.default.get().dispatch(o.SET_SCATTER,t));case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"removeAllPermissionsFor",value:(n=(0,i.default)(u.default.mark((function e(t){var r,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.default.get().state.scatter.clone(),(n=r.keychain.apps.find((function(e){return e.origin===t})))&&r.keychain.removeApp(n),r.keychain.permissions=r.keychain.permissions.filter((function(e){return e.origin!==t})),e.next=6,p.default.get().dispatch(o.SET_SCATTER,r);case 6:return this.checkAppLinkPermissions(t),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"removePermission",value:(r=(0,i.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=p.default.get().state.scatter.clone()).keychain.permissions=r.keychain.permissions.filter((function(e){return e.id!==t.id})),e.next=4,p.default.get().dispatch(o.SET_SCATTER,r);case 4:return this.checkAppLinkPermissions(t.origin),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"removeDanglingPermissions",value:(t=(0,i.default)(u.default.mark((function e(){var t,r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.default.get().state.scatter.clone(),r=t.keychain.permissions.map((function(e){return e.origin})),t.keychain.apps=t.keychain.apps.filter((function(e){return r.includes(e.origin)})),e.abrupt("return",p.default.get().dispatch(o.SET_SCATTER,t));case 4:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();t.default=h},fEu1:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("x0xh")),u=n(r("eOAV")),i={AppsService:a.default,PermissionService:u.default};t.default=i},l31u:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r("o0o1")),i=a(r("yXPU")),s=a(r("lwsE")),c=a(r("W8MJ")),o=n(r("qjwK")),f=a(r("KLk5")),l=r("MPB0"),d=a(r("GwxU")),p=a(r("pk5N")),h=a(r("z/LQ")),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Promise.race([new Promise((function(e){return setTimeout((function(){return e(t)}),1e4)})),e.catch((function(){return t}))])},y=[],v=function(){function e(){(0,s.default)(this,e)}var t,r,n,a,v,m,b,w,g;return(0,c.default)(e,null,[{key:"pairs",value:(g=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k((0,l.POST)("exchange/pairs",{token:t})).then((function(e){return e?(Object.keys(e).map((function(t){return e[t].map((function(e){return e.token=d.default.fromJson(e.token)}))})),e):[]})));case 1:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)})},{key:"rate",value:(w=(0,i.default)(u.default.mark((function e(t,r,n){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k((0,l.POST)("exchange/rate",{token:t,other:r,service:n})));case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return w.apply(this,arguments)})},{key:"order",value:(b=(0,i.default)(u.default.mark((function e(t,r,n,a,i,s){var c,o=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!(o.length>6&&void 0!==o[6])||o[6],e.abrupt("return",k((0,l.POST)("exchange/order",{service:t,token:r,other:n,amount:a,from:i,to:s,returnsErrors:c})));case 2:case"end":return e.stop()}}),e)}))),function(e,t,r,n,a,u){return b.apply(this,arguments)})},{key:"accepted",value:(m=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k((0,l.GET)("exchange/accepted/".concat(t))));case 1:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)})},{key:"cancelled",value:(v=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k((0,l.GET)("exchange/cancelled/".concat(t))));case 1:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})},{key:"orderStatus",value:(a=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k((0,l.GET)("exchange/order/".concat(t)).then((function(e){return e.updated.status}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"stablePaths",value:(n=(0,i.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k((0,l.GET)("exchange/stabilize/paths"),[]));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"pairable",value:(r=(0,i.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k((0,l.GET)("exchange/pairable"),[]));case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"watch",value:function(e){return y.push(e),this.checkExchanges(),!0}},{key:"checkExchanges",value:(t=(0,i.default)(u.default.mark((function e(){var t,r,n=this;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(void 0),y.length){e.next=3;break}return e.abrupt("return");case 3:t=u.default.mark((function e(t){var r,a,i,s;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y[t],e.next=3,n.orderStatus(r.orderDetails.id);case 3:if((a=e.sent)===r.status){e.next=20;break}return r.status=a,e.next=8,p.default.get().dispatch(o.UPDATE_HISTORY,r);case 8:if("complete"!==a){e.next=20;break}if(h.default.pushNotification("Exchange Complete","Your token exchange has just completed."),y=y.filter((function(e){return e.id!==r.id})),!(i=p.default.get().state.scatter.keychain.accounts.filter((function(e){return e.sendable()===r.to}))).length){e.next=20;break}s=0;case 14:if(!(s<i.length)){e.next=20;break}return e.next=17,f.default.loadBalancesFor(i[s]);case 17:s++,e.next=14;break;case 20:case"end":return e.stop()}}),e)})),r=0;case 5:if(!(r<y.length)){e.next=10;break}return e.delegateYield(t(r),"t0",7);case 7:r++,e.next=5;break;case 10:setTimeout((function(){return n.checkExchanges()}),3e4);case 11:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();t.default=v},x0xh:function(e,t,r){"use strict";var n=r("284h"),a=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r("J4zp")),i=a(r("o0o1")),s=a(r("yXPU")),c=a(r("lwsE")),o=a(r("W8MJ")),f=(r("F+MN"),n(r("qjwK"))),l=n(r("MPB0")),d=a(r("pk5N")),p=a(r("UYLU")),h=function(){function e(){(0,c.default)(this,e)}var t,r,n;return(0,o.default)(e,null,[{key:"getApps",value:(n=(0,s.default)(i.default.mark((function e(){var t,r,n,a,u,s,c=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:[],r=!(c.length>1&&void 0!==c[1])||c[1],n=c.length>2&&void 0!==c[2]?c[2]:"https://rawgit.com/GetScatter/ScatterApps/master/logos",a=c.length>3&&void 0!==c[3]?c[3]:"svg",e.next=6,l.default.apps(t);case 6:return u=e.sent,s=u.reduce((function(e,t){return t.hasOwnProperty("hasimage")&&(t.img="".concat(n,"/").concat(t.applink,".").concat(a)),e[t.applink]=t,e}),{}),r&&d.default.get()&&d.default.get().dispatch(f.SET_DAPP_DATA,s),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"getFeaturedApps",value:(r=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.GET)("apps/featured");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"getAppDataFromServer",value:(t=(0,s.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.GET)("app/".concat(t)));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"appIsInLocalData",value:function(e){var t=d.default.get().state.dappData||{},r=t[e];return r||function(){if(!(e.split(".").length<2)){var n=e.split("."),a=(0,u.default)(n,3),i=(a[0],a[1]),s=a[2];Object.keys(t).map((function(n){if(-1!==e.indexOf(n)){var a=t[n];if(a.hasOwnProperty("subdomains")&&a.subdomains.length)if(a.subdomains.find((function(e){return"*"===e}))){if("*.".concat(n)==="*.".concat(i,".").concat(s))return r=a}else a.subdomains.map((function(t){if("".concat(t,".").concat(n)===e)return r=a}))}}))}}(),r}},{key:"getAppData",value:function(t){var r={applink:t,type:"",name:t,description:"",logo:"",url:""},n=e.appIsInLocalData(t);if(!n)return r;return n.description.length>70&&(n.description="".concat(n.description.substr(0,70)).concat(n.description.length>70?"...":"")),n}},{key:"categories",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e.appsByCategory(t).map((function(e){return e.type}))}},{key:"appsByCategory",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=d.default.get().state.dappData;return r?Object.keys(r).reduce((function(e,t){var n=r[t];return e.find((function(e){return e.type===n.type}))||e.push({type:n.type,apps:[]}),e.find((function(e){return e.type===n.type})).apps.push(n),e}),[]).map((function(r){return p.default.shuffle(r.apps),t?r:(r.apps=r.apps.filter((function(t){var r=t.applink;return e.getAppData(r).hasOwnProperty("img")})),r)})).sort((function(e,t){return t.apps.length-e.apps.length})):{}}},{key:"appsByTerm",value:function(e){var t=d.default.get().state.dappData;return t?Object.keys(t).reduce((function(r,n){var a=t[n],u=function(t){return t.toLowerCase().trim().indexOf(e.toLowerCase().trim())>-1};return(u(a.applink)||u(a.name)||u(a.description))&&r.push(a),r}),[]):{}}},{key:"linkedApps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return d.default.get().state.scatter.keychain.permissions.filter((function(e){return e.isIdentity})).map((function(t){var r=t.origin;return e.getAppData(r)})).filter((function(e){return e.type===r||!r})).filter((function(e){return e.name.toLowerCase().indexOf(t)>-1}))}}]),e}();t.default=h}}]);