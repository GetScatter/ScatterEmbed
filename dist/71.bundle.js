(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{"/SjY":function(t,e,s){"use strict";s.r(e);var i=s("L2JU"),a=s("B0RS"),n=s("q4Ju"),o=s("KHd+"),r=Object(o.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("img",{attrs:{src:"static/assets/icon_send.png"}})}),[],!1,null,null,null).exports,c=s("EnWD"),l=s("qjwK"),u=s("l31u"),d=s.n(u),f=s("IfgB"),p=s("Gbp+"),m={components:{SearchAndFilter:a.a,Exchange:n.a,Transfer:r},data:()=>({networkFilter:null,typeFilter:null,terms:"",loadingStatus:!1}),mounted(){this.history.map(t=>{const e="action"===t.type?t.account:t.from;this.keypairs.find(t=>t.unique()===e.keypairUnique)||this[l.DELTA_HISTORY](t)})},computed:{...Object(i.d)(["history"]),...Object(i.c)(["accounts","explorers","keypairs"]),filteredTokenHistories(){return this.history.filter(t=>[c.HISTORY_TYPES.Transfer,c.HISTORY_TYPES.Exchange].includes(t.type)).map(t=>{const e=t.type===c.HISTORY_TYPES.Transfer?t.token:t.fromToken,s=t.type===c.HISTORY_TYPES.Transfer?null:t.toToken,i=t.type===c.HISTORY_TYPES.Transfer?t.amount:t.fromToken.amount,a=t.type===c.HISTORY_TYPES.Transfer?null:t.orderDetails.expected;return{id:t.id,type:t.type,from:t.from,to:t.to,token:e,memo:t.memo,amount:i,toAmount:a,timestamp:t.timestamp,txid:t.txid,toToken:s,order:t.orderDetails,status:t.status}}).filter(t=>!this.networkFilter||t.from.network().unique()===this.networkFilter.unique()).filter(t=>!this.terms.length||(()=>t.from.sendable().toLowerCase().indexOf(this.terms)>-1||t.to.toLowerCase().indexOf(this.terms)>-1||t.token.symbol.toLowerCase().indexOf(this.terms)>-1||t.memo&&t.memo.toLowerCase().indexOf(this.terms)>-1)())},filteredActionHistories(){return this.history.filter(t=>[c.HISTORY_TYPES.Action].includes(t.type)).map(t=>{const e=t.clone();return e.account=this.accounts.find(e=>e.unique()===t.account),e.account?(e.token=e.account.network().systemToken().clone(),e):null}).filter(t=>t).filter(t=>!this.networkFilter||t.account.network().unique()===this.networkFilter.unique()).filter(t=>!this.terms.length||(()=>t.account.sendable().toLowerCase().indexOf(this.terms)>-1||t.action.toLowerCase().indexOf(this.terms)>-1)())},allHistories(){return this.filteredTokenHistories.concat(this.filteredActionHistories).filter(t=>!this.typeFilter||t.type===this.typeFilter).sort((t,e)=>e.timestamp-t.timestamp)}},methods:{decimalsOrDefault:t=>t.decimals?t.decimals:PluginRepository.plugin(t.blockchain).defaultDecimals(),async refreshStatus(t){this.loadingStatus=!0;const e=this.history.find(e=>e.id===t);if(!e)return this.loadingStatus=!1;const s=await d.a.orderStatus(e.orderDetails.id);e.status!==s&&(e.status=s,await this[l.UPDATE_HISTORY](e)),this.loadingStatus=!1},clearHistory(){f.a.push(p.a.prompt("Clearing history","You are about to erase your entire local history. This will not erase keys or accounts.",t=>{t&&(this[l.DELTA_HISTORY](null),this.$router.push({name:this.RouteNames.HOME}))},!0))},view(t){const e=this.explorers[t.token.blockchain].parsed();this.openInBrowser(e.transaction(t.txid))},redo(t){t.type===c.HISTORY_TYPES.Exchange?this.$router.push({name:this.RouteNames.EXCHANGE,query:{history:t.id}}):this.$router.push({name:this.RouteNames.TRANSFER,query:{history:t.id}})},...Object(i.b)([l.DELTA_HISTORY,l.UPDATE_HISTORY])}},h=(s("1XCn"),Object(o.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"histories"},[s("SearchAndFilter",{on:{terms:function(e){return t.terms=e}}}),t._v(" "),s("section",{staticClass:"events"},t._l(t.allHistories,(function(e){return s("section",["transfer"===e.type||"exchange"===e.type?s("section",{staticClass:"event"},[s("section",{staticClass:"details"},["transfer"===e.type?s("figure",{staticClass:"title"},[t._v("\n\t\t\t\t\t\tSent "+t._s(t.formatNumber(parseFloat(e.amount).toFixed(t.decimalsOrDefault(e.token)),!0))+" "+t._s(e.token.symbol)+"\n\t\t\t\t\t")]):t._e(),t._v(" "),"exchange"===e.type?s("figure",{staticClass:"title"},[s("figure",{staticClass:"exchange-from"},[t._v("Exchanged "+t._s(t.formatNumber(parseFloat(e.amount).toFixed(t.decimalsOrDefault(e.token)),!0))+" "+t._s(e.token.symbol))]),t._v("\n\t\t\t\t\t\tReceived "+t._s(t.formatNumber(parseFloat(e.toAmount).toFixed(t.decimalsOrDefault(e.toToken)),!0))+" "+t._s(e.toToken.symbol)+"\n\t\t\t\t\t")]):t._e(),t._v(" "),s("section",{staticClass:"row"},["exchange"===e.type?s("figure",{staticClass:"status",on:{click:function(s){return t.refreshStatus(e.id)}}},[t.loadingStatus?s("i",{staticClass:"icon-arrows-ccw animate-spin"}):s("span",[s("i",{staticClass:"icon-check"}),t._v(" "+t._s(e.status))])]):t._e(),t._v(" "),s("figure",{staticClass:"date"},[t._v(t._s(new Date(e.timestamp).toLocaleString()))])]),t._v(" "),e.memo&&e.memo.length?s("section",{staticClass:"row"},[s("figure",{staticClass:"memo"},[t._v(t._s(e.memo))])]):t._e()]),t._v(" "),s("section",{staticClass:"participants"},[s("section",{staticClass:"accounts"},[s("figure",{staticClass:"account blue"},[t._v(t._s(e.from.sendable()))]),t._v(" "),e.from.sendable()!==e.to?s("figure",{staticClass:"account"},[t._v(t._s(e.to))]):t._e()]),t._v(" "),e.from.network()?s("figure",{staticClass:"network"},[t._v(t._s(e.from.network().name))]):s("figure",{staticClass:"network"},[t._v("Network disabled ("+t._s(e.from.networkUnique)+")")])]),t._v(" "),s("section",{staticClass:"actions"},[s("Button",{attrs:{text:"View"},nativeOn:{click:function(s){return t.view(e)}}}),t._v(" "),s("Button",{attrs:{text:"Redo",blue:"1"},nativeOn:{click:function(s){return t.redo(e)}}})],1)]):t._e(),t._v(" "),"action"===e.type?s("section",{staticClass:"event"},[s("section",{staticClass:"details"},[s("figure",{staticClass:"title"},[t._v(t._s(e.action))]),t._v(" "),s("section",{staticClass:"row"},[s("figure",{staticClass:"date"},[t._v(t._s(new Date(e.timestamp).toLocaleString()))])])]),t._v(" "),s("section",{staticClass:"participants"},[s("section",{staticClass:"accounts"},[s("figure",{staticClass:"account blue"},[t._v(t._s(e.account.sendable()))])]),t._v(" "),s("figure",{staticClass:"network"},[t._v(t._s(e.account.network().name))])]),t._v(" "),s("section",{staticClass:"actions"},[s("Button",{attrs:{text:"View"},nativeOn:{click:function(s){return t.view(e)}}})],1)]):t._e()])})),0),t._v(" "),s("section",{staticClass:"tail"},[s("Button",{attrs:{text:"Clear History",blue:"1"},nativeOn:{click:function(e){return t.clearHistory(e)}}})],1)],1)}),[],!1,null,"473193c5",null));e.default=h.exports},"1XCn":function(t,e,s){"use strict";var i=s("cX2l");s.n(i).a},"Zm+8":function(t,e,s){(t.exports=s("JPst")(!1)).push([t.i,".histories[data-v-473193c5]{height:calc(100vh - 0px);display:flex;flex-direction:column}.histories .tail[data-v-473193c5]{flex:0 0 auto;display:flex;align-items:center;padding:0 20px;height:70px;border-top:1px solid #dfe0e1;justify-content:flex-end}.histories .events[data-v-473193c5]{overflow-y:scroll;padding:10px 40px;flex:1}.histories .events .event[data-v-473193c5]{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #dfe0e1;padding:20px 0}.histories .events .event .icon[data-v-473193c5]{flex:0 0 auto;margin-right:20px}.histories .events .event .details[data-v-473193c5]{flex:1;padding-right:20px}.histories .events .event .details .title[data-v-473193c5]{font-size:12px;font-weight:bold}.histories .events .event .details .exchange-from[data-v-473193c5]{font-size:10px;color:#7a7a7a}.histories .events .event .details .row[data-v-473193c5]{margin-top:3px;font-size:10px;display:flex}.histories .events .event .details .row .status[data-v-473193c5]{margin-right:12px}.histories .events .event .details .row .memo[data-v-473193c5]{margin-top:10px;font-size:9px;padding:5px;border:1px solid #dfe0e1;border-radius:0}.histories .events .event .participants[data-v-473193c5]{flex:1;font-size:10px}.histories .events .event .participants .account[data-v-473193c5]{font-weight:bold}.histories .events .event .participants .account.blue[data-v-473193c5]{color:#0799ff}.histories .events .event .participants .network[data-v-473193c5]{font-size:9px;color:#7a7a7a;margin-top:10px}.histories .events .event .actions[data-v-473193c5]{padding-left:20px;display:flex;justify-content:flex-end}.histories .events .event .actions button[data-v-473193c5]{margin-right:10px}\n",""])},cX2l:function(t,e,s){var i=s("Zm+8");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s("SZ7m").default)("50ae6de1",i,!0,{})}}]);